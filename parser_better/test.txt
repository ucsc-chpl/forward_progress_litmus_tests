THREAD 0
0: if (Exch(Mem[0],1) == 0) goto 0;
1: if (2 == 0) goto 0;
2: Mem[2] = Exch(Mem[1], 1);

THREAD 1
0: if (Exch(Mem[0],0) == 1) goto 0;

THREAD 2
0: Mem[1] = Mem[0];